const $=window.Vue,{BaseTransition:de,BaseTransitionPropsValidators:ce,Comment:pe,DeprecationTypes:me,EffectScope:ge,ErrorCodes:fe,ErrorTypeStrings:Se,Fragment:M,KeepAlive:ve,ReactiveEffect:ye,Static:he,Suspense:Ce,Teleport:we,Text:be,TrackOpTypes:Te,Transition:xe,TransitionGroup:Pe,TriggerOpTypes:Re,VueElement:ke,__esModule:Ve,assertNumber:Ae,callWithAsyncErrorHandling:Ie,callWithErrorHandling:Me,camelize:Ee,capitalize:Le,cloneVNode:De,compatUtils:He,compile:Fe,computed:E,createApp:_e,createBlock:Be,createCommentVNode:G,createElementBlock:c,createElementVNode:e,createHydrationRenderer:ze,createPropsRestProxy:Ue,createRenderer:qe,createSSRApp:Oe,createSlots:$e,createStaticVNode:Ge,createTextVNode:S,createVNode:o,customRef:Ne,defineAsyncComponent:je,defineComponent:Ke,defineCustomElement:We,defineEmits:Qe,defineExpose:Ye,defineModel:Je,defineOptions:Xe,defineProps:Ze,defineSSRCustomElement:et,defineSlots:tt,devtools:rt,effect:ot,effectScope:lt,getCurrentInstance:nt,getCurrentScope:st,getCurrentWatcher:at,getTransitionRawChildren:it,guardReactiveProps:ut,h:dt,handleError:ct,hasInjectionContext:pt,hydrate:mt,hydrateOnIdle:gt,hydrateOnInteraction:ft,hydrateOnMediaQuery:St,hydrateOnVisible:vt,initCustomFormatter:yt,initDirectivesForSSR:ht,inject:Ct,isMemoSame:wt,isProxy:bt,isReactive:Tt,isReadonly:xt,isRef:Pt,isRuntimeOnly:Rt,isShallow:kt,isVNode:Vt,markRaw:At,mergeDefaults:It,mergeModels:Mt,mergeProps:Et,nextTick:Lt,nodeOps:Dt,normalizeClass:N,normalizeProps:Ht,normalizeStyle:Ft,onActivated:_t,onBeforeMount:Bt,onBeforeUnmount:zt,onBeforeUpdate:Ut,onDeactivated:qt,onErrorCaptured:Ot,onMounted:$t,onRenderTracked:Gt,onRenderTriggered:Nt,onScopeDispose:jt,onServerPrefetch:Kt,onUnmounted:Wt,onUpdated:Qt,onWatcherCleanup:Yt,openBlock:p,patchProp:Jt,popScopeId:Xt,provide:Zt,proxyRefs:er,pushScopeId:tr,queuePostFlushCb:rr,reactive:or,readonly:lr,ref:i,registerRuntimeCompiler:nr,render:sr,renderList:L,renderSlot:ar,resolveComponent:ir,resolveDirective:ur,resolveDynamicComponent:dr,resolveFilter:cr,resolveTransitionHooks:pr,setBlockTracking:mr,setDevtoolsHook:gr,setTransitionHooks:fr,shallowReactive:Sr,shallowReadonly:vr,shallowRef:yr,ssrContextKey:hr,ssrUtils:Cr,stop:wr,toDisplayString:u,toHandlerKey:br,toHandlers:Tr,toRaw:xr,toRef:Pr,toRefs:Rr,toValue:kr,transformVNodeArgs:Vr,triggerRef:Ar,unref:l,useAttrs:Ir,useCssModule:Mr,useCssVars:Er,useHost:Lr,useId:Dr,useModel:Hr,useSSRContext:Fr,useShadowRoot:_r,useSlots:Br,useTemplateRef:zr,useTransitionState:Ur,vModelCheckbox:qr,vModelDynamic:Or,vModelRadio:$r,vModelSelect:Gr,vModelText:Nr,vShow:jr,version:Kr,warn:Wr,watch:j,watchEffect:Qr,watchPostEffect:Yr,watchSyncEffect:Jr,withAsyncContext:Xr,withCtx:a,withDefaults:Zr,withDirectives:eo,withKeys:to,withMemo:ro,withModifiers:oo,withScopeId:lo}=$,{Alert:no,AuthCard:so,Avatar:ao,Badge:io,Button:v,ButtonGroup:uo,Calendar:co,Card:R,CardList:po,CardListItem:mo,CardPanel:go,CharacterCounter:fo,Checkbox:So,CheckboxGroup:vo,CodeEditor:yo,Combobox:ho,CommandPaletteItem:Co,ConfirmationModal:wo,Context:bo,ContextFooter:To,ContextHeader:xo,ContextItem:Po,ContextLabel:Ro,ContextMenu:ko,ContextSeparator:Vo,CreateForm:Ao,DatePicker:Io,DateRangePicker:Mo,Description:Eo,DocsCallout:Lo,DragHandle:Do,Dropdown:Ho,DropdownItem:Fo,DropdownLabel:_o,DropdownMenu:Bo,DropdownSeparator:zo,DropdownFooter:Uo,DropdownHeader:qo,Editable:Oo,ErrorMessage:$o,EmptyStateItem:Go,EmptyStateMenu:No,Field:jo,Header:K,Heading:D,HoverCard:Ko,Icon:Wo,Input:H,InputGroup:Qo,InputGroupAppend:Yo,InputGroupPrepend:Jo,Label:Xo,Listing:Zo,ListingCustomizeColumns:el,ListingFilters:tl,ListingHeaderCell:rl,ListingPagination:ol,ListingPresets:ll,ListingPresetTrigger:nl,ListingRowActions:sl,ListingSearch:al,ListingTable:il,ListingTableBody:ul,ListingTableHead:dl,ListingToggleAll:cl,LivePreview:pl,LivePreviewPopout:ml,Modal:gl,ModalClose:fl,ModalTitle:Sl,Pagination:W,Panel:vl,PanelFooter:yl,PanelHeader:hl,Popover:Cl,PublishComponents:wl,PublishContainer:Q,publishContextKey:bl,injectPublishContext:Tl,PublishField:xl,PublishFields:Pl,PublishFieldsProvider:Rl,PublishForm:kl,PublishLocalizations:Vl,PublishSections:Al,PublishTabs:Il,Radio:Ml,RadioGroup:El,Select:Ll,Separator:Dl,Slider:Hl,Skeleton:Fl,SplitterGroup:_l,SplitterPanel:Bl,SplitterResizeHandle:zl,StatusIndicator:Ul,Subheading:F,Switch:Y,TabContent:ql,Stack:Ol,StackClose:$l,StackHeader:Gl,StackFooter:Nl,StackContent:jl,Table:Kl,TableCell:Wl,TableColumn:Ql,TableColumns:Yl,TableRow:Jl,TableRows:Xl,TabList:Zl,TabProvider:en,Tabs:tn,TabTrigger:rn,Textarea:on,TimePicker:ln,ToggleGroup:nn,ToggleItem:sn,Widget:an,registerIconSet:un,registerIconSetFromStrings:dn}=__STATAMIC__.ui,{AfterSaveHooks:J,BeforeSaveHooks:X,Pipeline:Z,PipelineStopped:cn,Request:ee}=__STATAMIC__.savePipeline,{Form:pn,Head:mn,Link:gn,router:y,toggleArchitecturalBackground:fn,useArchitecturalBackground:Sn,useForm:vn,usePoll:yn}=__STATAMIC__.inertia,te={id:"alt-redirect"},re={class:"text-sm"},oe={class:"my-4 pb-2 px-4"},le={class:"px-2"},ne={key:0,"data-size":"sm",tabindex:"0",class:"data-table",style:{"table-layout":"fixed"}},se={key:1,"data-size":"sm",tabindex:"0",class:"data-table",style:{"table-layout":"fixed"}},ae=["href"],ie={class:"flex justify-between items-center"},k=10,ue={__name:"AltRedirect",props:{title:String,instructions:String,action:String,blueprint:Array,initialMeta:Array,initialValues:Array,items:Array,type:String},setup(s){const g=s,d=i(1),w=i(null),f=i(""),b=i({...g.initialValues}),_=i(g.initialMeta),V=i({}),A=i(!1),I=i("container"),T=E(()=>Math.ceil(h.value.total/k)),h=E(()=>{let n=g.items;f.value?.length>0&&(n=n.filter(x=>Object.values(x).map(P=>P?.toString().toLowerCase()).some(P=>P?.includes(f.value.toLowerCase()))));const r=(d.value-1)*k,t=r+k;return{total:n.length,data:n.slice(r,t)}});function m(n){n>T.value&&(n=T.value),d.value=n}function B(n,r){confirm("Are you sure you want to delete this redirect?")&&y.post(cp_url("alt-design/alt-redirect/delete"),{from:n,id:r},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{Statamic.$toast.success("Redirect deleted successfully!"),m(d.value)}})}function z(n){confirm("Are you sure you want to delete this query string?")&&y.post(cp_url("/alt-design/alt-redirect/query-strings/delete"),{query_string:n},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{Statamic.$toast.success("Query string deleted successfully!"),m(d.value)}})}function U(){if(!w.value){alert("You haven't attached a CSV file!");return}y.post(cp_url("alt-design/alt-redirect/import"),{file:w.value},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{Statamic.$toast.success("CSV imported successfully!"),m(d.value)}})}function q(n,r){y.post(cp_url("/alt-design/alt-redirect/query-strings/toggle"),{index:n,toggleKey:r},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{Statamic.$toast.success("Toggled successfully!"),m(d.value)}})}function O(){new Z().provide({container:I,errors:V,saving:A}).through([new X("alt-redirect"),new ee(cp_url("/alt-design/alt-redirect"),"POST",{type:g.type}),new J("alt-redirect")]).then(()=>{b.value={...g.initialValues},Statamic.$toast.success("Redirect added successfully!"),y.reload()})}return j(f,()=>{m(1)}),(n,r)=>(p(),c("div",te,[o(l(K),{title:s.title},{title:a(()=>[e("div",null,[S(u(s.title)+" ",1),e("div",re,u(s.instructions),1)])]),default:a(()=>[o(l(v),{text:"Save",variant:"primary",disabled:A.value,onClick:O},null,8,["disabled"])]),_:1},8,["title"]),o(l(Q),{ref_key:"container",ref:I,action:s.action,blueprint:s.blueprint,meta:_.value,modelValue:b.value,"onUpdate:modelValue":r[0]||(r[0]=t=>b.value=t),errors:V.value},null,8,["action","blueprint","meta","modelValue","errors"]),o(l(R),{class:"overflow-hidden p-0"},{default:a(()=>[e("div",oe,[o(l(H),{modelValue:f.value,"onUpdate:modelValue":r[1]||(r[1]=t=>f.value=t),placeholder:"Search"},null,8,["modelValue"])]),e("div",le,[s.type=="redirects"?(p(),c("table",ne,[r[4]||(r[4]=e("thead",null,[e("tr",null,[e("th",{class:"group from-column sortable-column",style:{width:"33%"}},[e("span",null,"From")]),e("th",{class:"group from-column sortable-column pr-8 w-24",style:{width:"33%"}},[e("span",null,"To")]),e("th",{class:"group to-column pr-8",style:{width:"8%"}},[e("span",null,"Type")]),e("th",{class:"group to-column pr-8",style:{width:"15%"}},[e("span",null,"Sites")]),e("th",{class:"actions-column",style:{width:"13.4%"}})])],-1)),e("tbody",null,[(p(!0),c(M,null,L(h.value.data,t=>(p(),c("tr",{key:t.id,style:{width:"100%",overflow:"clip"}},[e("td",null,u(t.from),1),e("td",null,u(t.to),1),e("td",null,u(t.redirect_type),1),e("td",null,u(t.sites&&t.sites.length?t.sites.join(", "):"Unknown"),1),e("td",null,[o(l(v),{icon:"trash",size:"sm",onClick:x=>B(t.from,t.id),text:"Remove",variant:"danger"},null,8,["onClick"])])]))),128))])])):s.type=="query-strings"?(p(),c("table",se,[r[5]||(r[5]=e("thead",null,[e("tr",null,[e("th",{class:"group from-column sortable-column",style:{width:"46%"}},[e("span",null,"Query String Key")]),e("th",{class:"group to-column pr-8",style:{width:"20%"}},[e("span",null,"Strip")]),e("th",{class:"group to-column pr-8",style:{width:"20.6%"}},[e("span",null,"Sites")]),e("th",{class:"actions-column",style:{width:"13.4%"}})])],-1)),e("tbody",null,[(p(!0),c(M,null,L(h.value.data,(t,x)=>(p(),c("tr",{key:t.id,style:{width:"100%",overflow:"clip"}},[e("td",null,u(t.query_string),1),e("td",null,[o(l(Y),{modelValue:t.strip,"onUpdate:modelValue":[C=>t.strip=C,C=>q(t.query_string,"strip")]},null,8,["modelValue","onUpdate:modelValue"])]),e("td",null,u(t.sites&&t.sites.length?t.sites.join(", "):"Unknown"),1),e("td",null,[o(l(v),{icon:"trash",size:"sm",onClick:C=>z(t.query_string),text:"Remove",variant:"danger"},null,8,["onClick"])])]))),128))])])):G("",!0)]),o(l(W),{"resource-meta":{current_page:d.value,last_page:T.value,total:h.value.total},"show-totals":!1,"show-per-page-selector":!1,onPageSelected:m},null,8,["resource-meta"])]),_:1}),e("div",{class:N(["flex justify-between",{hidden:s.type=="query-strings"}])},[o(l(R),{class:"w-full xl:w-1/2 card overflow-hidden p-0 mb-4 mt-4 mr-4 px-4 py-4"},{default:a(()=>[e("header",null,[o(l(D),null,{default:a(()=>[...r[6]||(r[6]=[S("CSV Export",-1)])]),_:1}),o(l(F),null,{default:a(()=>[...r[7]||(r[7]=[S("Exports CSV of all redirects, use this format on import.",-1)])]),_:1})]),e("a",{class:"btn-primary",href:n.cp_url("/alt-design/alt-redirect/export"),download:""},[o(l(v),{text:"Export CSV"})],8,ae)]),_:1}),o(l(R),{class:"w-full xl:w-1/2 card overflow-hidden p-0 mb-4 mt-4 ml-4 px-4 py-4"},{default:a(()=>[e("header",null,[o(l(D),null,{default:a(()=>[...r[8]||(r[8]=[S("CSV Import",-1)])]),_:1}),o(l(F),null,{default:a(()=>[...r[9]||(r[9]=[S("Import CSV for redirects, use the export format on import.",-1)])]),_:1})]),e("div",ie,[o(l(H),{type:"file",onInput:r[2]||(r[2]=t=>w.value=t.target.files[0])}),o(l(v),{onClick:r[3]||(r[3]=t=>U()),text:"Import"})])]),_:1})],2)]))}};Statamic.booting(()=>{Statamic.$inertia.register("alt-redirect::Index",ue)});
